# Caddy 설정 파일 예시
# 우분투 서버에서 Caddy를 사용한 리버스 프록시 설정

# 도메인 설정 (실제 도메인으로 변경하세요)
yourdomain.com {
    # API 요청을 백엔드 서버(포트 5000)로 프록시
    reverse_proxy /api/* localhost:5000
    
    # 나머지 모든 요청을 프론트엔드 서버(포트 5001)로 프록시
    reverse_proxy * localhost:5001
    
    # 로그 설정
    log {
        output file /var/log/caddy/todo-app.log
        format json
    }
    
    # 보안 헤더 추가
    header {
        # XSS 보호
        X-XSS-Protection "1; mode=block"
        # 콘텐츠 타입 스니핑 방지
        X-Content-Type-Options "nosniff"
        # 클릭재킹 방지
        X-Frame-Options "DENY"
        # HTTPS 강제 (HTTPS 사용 시)
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
    }
}

# HTTP를 HTTPS로 리다이렉트 (선택사항)
# yourdomain.com:80 {
#     redir https://yourdomain.com{uri} permanent
# }
